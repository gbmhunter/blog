---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';

import { pageRoutes, sidebarData } from '../PageHierarchy.ts';

export async function getStaticPaths() {


  let staticPaths = [];
  for (const pageRoute of pageRoutes) {
    // console.log('Page:', pageFilePath);
    const fileInfo = pageRoute.fileData;

    // console.log('Page slug:', pageRoute.slug);
    // console.log('headings:', fileInfo.getHeadings());
    // console.log('sidebarData:', sidebarData);
    // console.log('Page title:', fileInfo.frontmatter.title);

    staticPaths.push({
      params: { slug: pageRoute.slug },
      props: { 
        title: fileInfo.frontmatter .title,
        Content: fileInfo.Content,
        headings: fileInfo.getHeadings()
      },
    });
  }

  return staticPaths;
}

const { title, Content, headings } = Astro.props;
---
<StarlightPage frontmatter={{ title: title }} headings={headings} sidebar={sidebarData.items as any}>
  <Content /> 
</StarlightPage>