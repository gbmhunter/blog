---
authors: [ "Geoffrey Hunter" ]
categories: [ "PCB Design" ]
date: 2013-10-29
draft: false
lastmod: 2022-01-21
tags: [ "PCB design", "transmission lines", "impedance", "routing", "dielectric", "characteristic impedance", "waveguides", "microstrips", "striplines" ]
title: "Transmission Lines"
type: "page"
---

## Overview

A _transmission line_ is a wire/cable/track on the PCB, that, because of the frequency of the electrical signals going through have reached a certain point (typically RF), you can no longer just treat the wire as a short circuit. Instead, the connection must be treated as a _transmission line_, and must be _terminated_ correctly. If it is not terminated correctly, reflections and standing waves can occur, which typically decrease the performance of the circuit.

.Schematic symbol for a transmission line, which represents a piece of coax cable. Because this usually isn't a component to appear on the BOM (if it's a PCB track), it's not normally given a designator.
image::transmission-line-schematic-symbol.png[width=500px]

_Termination_ is the process of adding components (usually resistors, but sometimes capacitors and inductors) to the ends of transmission lines (the start, the end, or both) to prevent things like reflections due to impedance mis-matches. See the link:[Termination page] for more info.

.An isometric diagram of a microstrip. Image from www.maximintegrated.com.
image::microstrip-track-example-in-isometric-view-microchip.gif[width=300px]

## Dielectric Constant

This is related to the capacitive ability of the medium between two copper layers to store charge. In a typical PCB stack-up, it is either the dielectric of the prepreg or the dielectric of the core.

## Characteristic Impedance

This is the impedance (kind of like resistance) a signal "sees" when travelling down a transmission line. Note that the main difference between standard resistance and the characteristic impedance is that the impedance does not depend on the length of the conductor. It has the same value no matter how long the transmission line.

The characteristic impedance of a transmission line need to equal the impedance of the end devices connected to it, otherwise reflections will occur.

Typical impedances and their associated uses are:

|===
| Characteristic Impedance | Uses

| 50立
| GPS antennas, GPRS antennas, BNC cables (for things like oscilloscopes)

| 75立
| Video.

| 100立
| Differential ethernet signals. Differential PCIe signals.

| 120立
| RS-485 bus

|===

## When Should I Worry About Impedance?

The first problem with digital waveforms is finding out the maximum frequency you need to support for it. It is not the clocking/data speed! If you assumed that, the edges of the clock would be rounded off and you'd end up with a sine-wave like waveform. The highest frequency components you need to support are the edges of the data. There is a well-known rule-of-thumb for applies to digital waveforms:

[stem]
++++
BW \approx \frac{0.35}{t_r}
++++

[.text-center]
where: +
stem:[ t_r ] is the maximum rise time from 10 to 90%, in seconds (s). +
stem:[ BW ] is the resulting maximum bandwidth the track has to support, in Hertz (Hz). You can also think of this as a maximum frequency, since the bandwidth starts at 0Hz. +

[example]
.Finding the track length at which you have to treat it as a transmission line for USB2.0. 
--
For example, the USB 2.0 specification states a maximum rise time of 4ns. Using the equation above, this gives us a bandwidth of approximately 87.5MHz. 

From this, we can calculate the wavelength of an 87.5MHz signal travelling down a track on standard FR-4 PCB.

[stem]
++++
\lambda = \frac{c}{f\sqrt{\epsilon_r}}
++++

[.text-center]
where: +
stem:[ c ] is the speed of light, in meters per second +
stem:[  f ] is the frequency that you worked out above (which we called bandwidth) +
stem:[ \epsilon_r ] is the di-electric of the material the electro-magnetic wave is travelling through, and is unitless. In our case this will be the di-electric of the PCB. For standard FR4, this is about 4.35. +

TIP: The impedance of a PCB track is not important if it is at least 10 times smaller than the wavelength of the signal.

Thus, the minimum wavelength of the USB full-speed signal is 1.65m, and the characteristic impedance of the track is only important if the total track length is greater than 165mm.
--

## Co-planar Waveguides (CPW)

Co-planaer waveguides (CPW) are a third alternative to microstrips and striplines for controlling the impedance of a circuitboard trace. There are two variants, the basic _co-planar waveguide_ and the _co-planar waveguide with ground_. The main advantage of a co-planar waveguide is that it **does not require a solid power plane** above or below it, making it a more flexible choice for layer and space constrained PCBs.

.A co-planer waveguide for a GSM antenna feed-line. The co-planar waveguide is the curved track that starts at E1. The three 0402 components are for a impedance matching circuit.
image::coplanaer-waveguide-for-gsm-antenna.png[width=490px]

Although you can't see it in the image above, there is a ground plane underneath the CPW (there are two internal layers between the visible top layer (red) and bottom layer (blue)).

## The Effects Of Vias

Vias are a bit of a nuisance when it comes to impedance controlled traces.

## External Links

A good impedance calculator for a number of different transmission lines is found at link:http://www.eeweb.com/toolbox/wire-microstrip-impedance/[http://www.eeweb.com/toolbox/wire-microstrip-impedance/].
